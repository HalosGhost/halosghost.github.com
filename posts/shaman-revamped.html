<!DOCTYPE html><html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta charset="utf-8">
    <meta name="author" content="Sam Stuewe">
    <title>Shaman, revamped! | Consciousness Riven</title>
    
            <link href="../assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
            <link href="../assets/css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css">
        <link href="../assets/css/rst.css" rel="stylesheet" type="text/css">
        <link href="../assets/css/code.css" rel="stylesheet" type="text/css">
        <link href="../assets/css/colorbox.css" rel="stylesheet" type="text/css">
        <link href="../assets/css/theme.css" rel="stylesheet" type="text/css">
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
    <![endif]-->
            <link rel="alternate" type="application/rss+xml" title="RSS" href="../rss.xml">

    



    
</head>
<body>
<!-- Menubar -->
<div class="navbar navbar-fixed-top" id="navbar">
    <div class="navbar-inner">
        <div class="container">

        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </a>

            <a class="brand" href="../">
            Consciousness Riven
            </a>
            <!-- Everything you want hidden at 940px or less, place within here -->
            <div class="nav-collapse collapse">
                <ul class="nav">
                    
                <li><a href="../archive.html">Archives</a>
                </li><li><a href="../categories/index.html">Tags</a>

                </li></ul>
                <ul class="nav pull-right">
                
                
                    <li>
			<a href="shaman-revamped.rst" id="sourcelink">Source</a>
		</li>
                </ul>
            </div>
        </div>
    </div>
</div>
<!-- End of Menubar -->
<div class="container-fluid" id="container-fluid">
    <!--Body content-->
    <div class="row-fluid">
    <div class="span2"></div>
    <div class="span8">
    
    <div class="postbox">
    <div class="h-entry" itemscope="itemscope" itemtype="http://schema.org/Article">
    
    <h1 class="p-name" itemprop="headline name">Shaman, revamped!</h1>

    <hr>
    <small>
        Posted: <time class="published dt-published" datetime="2013-12-10T22:08:28+00:00" itemprop="datePublished">2013-12-10 22:08</time>
        

		

          |  
		
    </small>
    <hr>
    <div class="e-content" itemprop="articleBody text">
    <p>Upon looking back at my code of Shaman 1.x, I discovered that it was really quite disgusting. It was dense, difficult to read and poorly implemented. Furthermore, many of the conventions I used in the first version were entirely not portable and incredibly inefficient. So, I resolved, a couple of weeks ago, to begin work on the second major release which would fix essentially all of the problems 1.x experienced.</p>
<p>First, and foremost, this means that the non-native C functions I used (namely curl and grep) had to be replaced by their native C counterparts. As a result, the work underway for <a class="reference external" href="https://github.com/HalosGhost/shaman">Shaman 2.x</a> will use a variety of libraries that the 1.x branch did not. Most obviously, this means it will link to libcurl rather than call curl inside a shell. Beyond the native implementations, the 2.x branch will be using much cleaner code conventions to complete the task delegated to it. The improvments in this area are clear everywhere. The following is a short list of all the improvments that users can expect:</p>
<ul class="simple">
<li><a class="reference external" href="http://curl.haxx.se/libcurl/">libcurl</a> for native data fetching</li>
<li>C's <a class="reference external" href="https://www.gnu.org/software/libc/manual/html_node/Getopt.html">getopt</a> for more sensible parsing of command-line arguments</li>
<li><a class="reference external" href="http://www.xmlsoft.org/downloads.html">libxml2</a> instead of giant, disgusting and essentially obfuscated fscanfs for parsing the fetched data</li>
<li><a class="reference external" href="http://www.hyperrealm.com/libconfig/">libconfig</a> for sensible configuration parsing</li>
<li>General code cleanliness and conventions (like prototypes and declaring variables where needed; not all on the stack)</li>
<li>strftime-like format string for simpler and more configurable output according to user-needs</li>
</ul>
<p>The end-result of this update will mean a few things. First of all, the final binary will certainly be a bit larger than 1.x. Having said that, it will run more efficiently, much faster and the weather data will be formatted exactly how users wish it to be which should mean easier parsing and more flexibility for a greater number of use-cases.</p>
<p>Though the work on updating Shaman has really just begun, a great deal of it has been completed. Because I have never worked with any of the libraries mentioned above before, I suspect that the final project is still a way off. Still, development is active and you can follow my progress on my <a class="reference external" href="https://github.com/HalosGhost/">GitHub</a>. As always, pull requests, suggestions and feature requests will always be appreciated—though I would ask that everyone hold off on bug reports until the testing stage is reached.</p>
    </div>
    </div>
    
    <ul class="pager">
        <li class="previous">
            <a href="shaman-an-adventure-with-c.html" rel="prev">← Previous post</a>
        </li>
    </ul>

    

    </div>

    </div>
    </div>
    <!--End of body content-->
</div>
<div class="footerbox">
    <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/"><img alt="Creative Commons License BY-SA" style="border-width:0;" src="http://i.creativecommons.org/l/by-sa/3.0/80x15.png"></a> Contents © 2013 <a href="mailto:halosghost@archlinux.info">Sam Stuewe</a> - Powered by <a href="http://nikola.ralsina.com.ar">Nikola</a>
</div>

            <script src="../assets/js/jquery-1.10.2.min.js" type="text/javascript"></script>
            <script src="../assets/js/bootstrap.min.js" type="text/javascript"></script>
        <script src="../assets/js/jquery.colorbox-min.js" type="text/javascript"></script>


	

    <script type="text/javascript">jQuery("a.image-reference").colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});
    $(window).on('hashchange', function(){
        if (location.hash && $(location.hash)[0]) {
            $('body').animate({scrollTop: $(location.hash).offset().top - $('#navbar').outerHeight(true)*1.2 }, 1);
        }
    });
    $(document).ready(function(){$(window).trigger('hashchange')});
    </script>
    
    
</body>
</html>